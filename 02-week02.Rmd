# Examining data I

## Introduction
Welcome to your second week of **Introduction to Quantitative Research Methods**. This week we will focus on **examining data** using measures of central tendency and measures of dispersion. These measures are collectively known as **descriptive statistics**. We will also talk about some basic data visualisation. 

This week is structured by **3** short videos, practical material that you need to work through in preparation for Thursday's seminar, and a seminar task that you need to do in prepratation for Thursday's seminar.

Let's get to it.

#### Video: Introduction W02 {-}
```{r 02-short-lecture-welcome, warnings=FALSE, message=FALSE, echo=FALSE}
library(vembedr)
embed_msstream('40cef170-a483-44bf-b7ca-5b08ca4a790e') %>% use_align('left')
```
[Lecture slides] [[Watch on MS stream]](https://web.microsoftstream.com/video/40cef170-a483-44bf-b7ca-5b08ca4a790e)

```{r 02-settings, warnings=FALSE, message=FALSE, echo=FALSE}
# settings
options(max.print=30)
```

### Reading list {#reading-list-w02}
Please find the reading list for this week below. We strongly recommend that you read the **core reading material** before you continue with the rest of this week's material.

#### Core reading {-}
- Lane *et al.*, 2003, **Chapter 3: Summarizing Distributions**. In: Lane *et al.*, 2003, Introduction to Statistics. Houston, Texas:  Rice University. [[Link]](http://onlinestatbook.com/Online_Statistics_Education.pdf)

#### Supplementary reading {-}
- Diez *et al.*, 2019, **Chapter 2: Summarizing data**. In: Diez *et al.*, 2019, OpenIntro Statistics. Fourth Edition. Boston, Massachusetts: OpenIntro.
[[Link]](https://leanpub.com/openintro-statistics)

### Q&A session
This week there will be **NO** live Q&A session.

## Measures of central tendency
Any research project involving [quantitative data](https://en.wikipedia.org/wiki/Quantitative_research) should start with an exploration / examination of the available datasets. This applies both to data that you have collected yourself or data that you have acquired in a different way, e.g. through downloading official [UK Census and labour market statistics](https://www.nomisweb.co.uk/). The set of techniques that is used to examine your data is called [descriptive statistcs](https://en.wikipedia.org/wiki/Descriptive_statistics). Descriptive statistics are used to describe the basic features of your dataset and provide simple summaries about your data. Together with simple visual analysis, they form the basis of virtually **every** quantitative data analysis 

#### Video: Descriptive statistics I {-}
```{r 02-descriptive-statistics, warnings=FALSE, message=FALSE, echo=FALSE}
embed_msstream('a6169cec-43ad-4c3f-bda6-9cc8fc4575f5') %>% use_align('left')
```
[[Lecture slides]](https://liveuclac-my.sharepoint.com/:b:/g/personal/ucfajtv_ucl_ac_uk/EdQtMgoDs4BPkvVXKqXPDjcBP1OllLAePoqYQM0JO0I8Yw?e=YvMuCS) [[Watch on MS stream]](https://web.microsoftstream.com/video/a6169cec-43ad-4c3f-bda6-9cc8fc4575f5)

For this tutorial we will continue to use the `London.Pop` object that we created during last week's tutorial. You may still have it loaded into your R workspace. To check if you do you can use the `ls()` command. Type this into the command line and see if `London.Pop` is printed. If not you can simply reload it:

```{r 02-make-sure-working-dir-is-set, warnings=FALSE, message=FALSE, eval=FALSE}
# set the working directory path to the folder you wish to use
# you may need to create the folder first if it doesn't exist
setwd('~/POLS0008') 
# note the single / (\\ will also work)
```

If you struggle with setting up your working directory, [have a look at how we did this last week](understanding-data.html#working-directory)!

```{r 02-load-csv, warnings=FALSE, message=FALSE, eval=FALSE}
# load csv file from working directory
London.Pop <- read.csv('census-historic-population-borough.csv')
```

```{r 02-load-csv-for-realz, warnings=FALSE, message=FALSE, echo=FALSE}
# load csv file from working directory
London.Pop <- read.csv('raw/census-historic-population-borough.csv')
```

Use the `head()`, or `View()`, function to remind yourself of the structure of the London population data frame. You should see **25** columns of data.

#### Questions {-}
1. What is the difference between using `head()` and `View()` to inspect your data?
2. Can you combine the functions `View()` and `head()` to browse only through a few lines of your data?

The `mean()` and `median()` were some of the first R functions we used at the last week to describe our `Friends` dataset. Now we know a little more about these **measures of central tendency**, we can apply them on our `London.Pop` data set. Let's do this by focusing on London's population in 2011.

```{r 02-slice-the-population, warnings=FALSE, message=FALSE}
# select the relevant columns
London.Pop2011 <- London.Pop[,c(1:2,24)]
```

#### Questions {-}
1. Do you remember what the `c()` function does?
2. Why do we need to use the `c()` in this case?
3. Instead of using the `[ , ]` [syntax](https://en.wikipedia.org/wiki/Syntax) to slice our data frame, how can we create the same `London.Pop2011` object by using the `$`?

Now we can calculate our **measures of central tendency**.

```{r 02-calculate-measures, warnings=FALSE, message=FALSE }
# calculate the median of the 2011 population variable
median(London.Pop2011$Persons.2011)

# calculate the mean of the 2011 population variable
mean(London.Pop2011$Persons.2011)
```

#### Questions {-}
1. How do you explain that the median is larger than the mean for this variable?

R does not have a standard in-built function to calculate mode. So we create a user function to calculate mode of a data set in R. This function takes the vector as input and gives the mode value as output. 

<div class="note">
You do not have to worry about creating your own functions, so just copy and paste the code below to create the `get_mode()` function.
</div>

```{r 02-create-a-mode-function, warnings=FALSE, message=FALSE }
# create a function to calculate the mode
get_mode <- function(x) {
   uniqv <- unique(x)
   uniqv[which.max(tabulate(match(x, uniqv)))]
}

# calculate the mode of the 2011 population variable
get_mode(London.Pop2011$Persons.2011)
```

#### Questions {-}
1. What is the level of measurement for our *Persons.2011* variable? Nominal, ordinal, or interval/ratio?
2. Even though we went through all the trouble to create our own function to calculate the mode, do you think it is a good choice to calculate the mode for this variable? Why or why not?

Although R does most of the hard work for us, especially with the `mean()` and the `median()` function, it is a good idea to once go through the calculations of these two central tendency measures ourselves. Let's start by step-by-step calculating the mean and then verify our results with the results of R's `mean()` function.

```{r 02-verify-that-mean, warnings=FALSE, message=FALSE }
# get the sum of all values
Persons.2011.Sum <- sum(London.Pop2011$Persons.2011)

# inspect the result
Persons.2011.Sum

# get the total number of observations
Persons.2011.Obs <- length(London.Pop2011$Persons.2011)

# inspect the result 
Persons.2011.Obs

# calculate the mean
Persons.2011.Mean <- Persons.2011.Sum / Persons.2011.Obs

# inspect the result
Persons.2011.Mean

# compare our result with R's built-in function
mean(London.Pop2011$Persons.2011) == Persons.2011.Mean
```

Great. Our own calculation of the mean is identical to R's built-in function. Now let's do the same for the median.

```{r 02-verify-that-median, warnings=FALSE, message=FALSE }
# get the total number of observations
Persons.2011.Obs <- length(London.Pop2011$Persons.2011)

# inspect the result
Persons.2011.Obs

# order our data from lowest to highest
Persons.2011.Ordered <- sort(London.Pop2011$Persons.2011, decreasing=FALSE)

# tell R that we want to keep these new order and that it should forget the old order
rownames(Persons.2011.Ordered) <- NULL

# inspect the result
Persons.2011.Ordered

# get the number of the observation that contains the median value
Persons.Median.Obs <- (Persons.2011.Obs + 1)/2

# inspect te result
Persons.Median.Obs

# get the median
Persons.2011.Median <- Persons.2011.Ordered[Persons.Median.Obs]

# inspect the result
Persons.2011.Median

# compare our result with R's built-in function
median(London.Pop2011$Persons.2011) == Persons.2011.Median
```

#### Questions {-}
1. For the calculation of the median: what does the `decreasing=FALSE` parameter in the `sort()` function do? What happens if we change this to `decreasing=TRUE`? Does this affect the results for the calculation of the median? Why? Why not?
2. When extracting the median: why are we using `[Persons.Median.Obs]` and not `[17]`? 
3. When comparing our own calculation to R's built-in function we are using two 'equal to' signs `==`, what happens if we only use one 'equal to' `=` sign?

## Measures of dispersion

#### Video: Descriptive Statistics II {-}
```{r 02-visualising-data, warnings=FALSE, message=FALSE, echo=FALSE}
embed_msstream('8623cbd8-ab11-40f9-b987-f7e966db50db') %>% use_align('left')
```
[[Lecture slides]](https://liveuclac-my.sharepoint.com/:b:/g/personal/ucfajtv_ucl_ac_uk/EQBtLckmEItBniy4Jh_toSEBJkOMZ5BKl5pid5BBvRNz0A?e=B01n4f) [[Watch on MS stream]](https://web.microsoftstream.com/video/8623cbd8-ab11-40f9-b987-f7e966db50db)

In addition to plotting, descriptive statistics offer a further tool for getting to know your data. They provide useful summaries of a dataset and along with intelligent plotting can also provide a good *sanity check* to ensure the data conform to expectations.

For the rest of this tutorial we will change our dataset to one containing the number of assault incidents that ambulances have been called to in London between 2009 and 2011. You will need to download a revised version of this file called: `ambulance_assault.csv` and upload it to your working directory. It is in the same data format (`csv`) as our London population file so we use the `read.csv()` command again.

#### File download {-}
| File                                                 | Type           | Link |
| :------                                              | :------        | :------ |
| Assault Incidents London        | `csv`             | [Download](https://liveuclac-my.sharepoint.com/:f:/g/personal/ucfajtv_ucl_ac_uk/ElYO3yqJw8RPvhwt6zOu9psBGFyesL1-aTWjralbxIGkhQ?e=m3WVg9) |

```{r 02-load-ambulance-csv, warnings=FALSE, message=FALSE, eval=FALSE}
# load csv file from working directory
input <- read.csv('ambulance_assault.csv')
```

```{r 02-load-ambulance-csv-for-realz, warnings=FALSE, message=FALSE, echo=FALSE}
# load csv file from working directory
input <- read.csv('raw/ambulance_assault.csv')
```

```{r 02-check-ambulance-csv-for-realz, warnings=FALSE, message=FALSE}
# inspect the results 
head(input)
```

```{r 02-check-nrow-ambulance-csv-for-realz, warnings=FALSE, message=FALSE}
# inspect the size of the dataset
nrow(input)
```

You will notice that the data table has 4 columns and 649 rows. The column headings are abbreviations of the following:

- **Bor_Code**: Borough Code. London has 32 Boroughs (such as Camden, Islington, Westminster, etc.) plus the City of London at the centre. These codes are used as a quick way of referring to them from official data sources. 
- **WardName**: Boroughs can be broken into much smaller areas known as [Wards](https://en.wikipedia.org/wiki/Wards_and_electoral_divisions_of_the_United_Kingdom). These are electoral districts and have existed in London for centuries. 
- **WardCode**: A statistical code for the Wards above. 
- **WardType**: a classification that groups wards based on similar characteristics. 
- **assault_09_11**: The number of assault incidents requiring an ambulance between 2009 and 2011 for each Ward.


As you may notice, the summary of a categorical variable is in very fact the same as [frequency table](https://en.wikipedia.org/wiki/Frequency_distribution):

```{r 02-frequency-table, warnings=FALSE, message=FALSE}
# create a frequency table of a categorical variable
freqtable <- table(input$WardType)

# inspect
freqtable
```

We can also get the proportion of each group using the frequency table as input:

```{r 02-prop-frequency-table, warnings=FALSE, message=FALSE}
# create a frequency table of a categorical variable
proptable <- prop.table(freqtable)

# inspect
proptable
```






```{r 02-descriptive-statistics-ambulance, warnings=FALSE, message=FALSE}
# calculate the mean of the assault incident variable
mean(input$assault_09_11)

# calculate the standard deviation of the assault incident variable
sd(input$assault_09_11)

# calculate the minimum value of the assault incident variable
min(input$assault_09_11)

# calculate the maximum value of the assault incident variable
max(input$assault_09_11)

# calculate the range of the assault incident variable
range(input$assault_09_11)
```

These are commonly used descriptive statistics. To make things even easier, R has a `summary()` function that calculates a number of these routine statistics simultaneously.

```{r 02-descriptive-statistics-summary, warnings=FALSE, message=FALSE}
# calculate the most common descriptive statistics for the assault incident variable
summary(input$assault_09_11)
```

You should see you get the minimum (Min.) and maximum (Max.) values of the *assault_09_11* column; its first (1st Qu.) and third (3rd Qu.) quartiles that comprise the interquartile range; its the mean and the median. The built-in R `summary()` function does not calculate the standard deviation. There are functions in other libraries that calculate more detailed descriptive statistics, including `describe()` in the `psych` package, which we will use in the later tutorials. We can also use the `summary()` function to describe a categorical variable and it will list its levels:

```{r 02-descriptive-statistics-categorical-variable, warnings=FALSE, message=FALSE}
# summarise a categorical variable
summary(input$WardType)
```



### Plotting data in R
Tools to create high quality plots have become one of R's greatest assets. This is a relatively recent development since the software has traditionally been focused on the statistics rather than visualisation. The standard installation of R has base graphic functionality built in to produce very simple plots. For example we can plot the relationship between the London population in 1811 and 1911.

```{r 02-quick-plot, warnings=FALSE, message=FALSE}
# make a quick plot of two variables of the London population data set
plot(London.Pop$Persons.1811,London.Pop$Persons.1911)
```

#### Questions {-}
1. What happens if you change the order of the variables you put in the `plot()` function? Why?
2. Instead of using the `$` to select the columns of our dataset, how else can we get the same results?

The result of calling the `plot()` function, is a very simple [scatter graph](https://en.wikipedia.org/wiki/Scatter_plot). The `plot()` function offers a huge number of options for customisation. You can see them using the `?plot` help pages and also the `?par` help pages (`par` in this case is short for parameters). There are some examples below (note how the parameters come after specifying the `x` and `y` columns).

```{r 02-quick-plot-with-some-options, warnings=FALSE, message=FALSE}
# add a title, change point colour, change point size
plot(London.Pop$Persons.1811, London.Pop$Persons.1911, main='Quick Plot in R', col='blue', cex=2)
```

```{r 02-quick-plot-with-different-options, warnings=FALSE, message=FALSE}
# add a title, change point colour, change point symbol
plot(London.Pop$Persons.1811, London.Pop$Persons.1911, main="Another Quick Plot in R", col='magenta', pch=22)
```

<div class="note">
For more information on the plot parameters (some have obscure names) have a look here: http://www.statmethods.net/advgraphs/parameters.html
</div>


## Seminar {#seminar-w02}

Please find the seminar task and seminar questions for this week's seminar below. 

<div class="note">
**Please make sure that you have executed the seminar task and have answered the seminar questions before the seminar!**
</div>

#### Seminar task {-}

#### Seminar questions {-}

1. Explain why each of these statistics are useful and what type of data are required to calculate them:
- Mean
- Median
- Mode
- Interquartile Range
- Range
- Standard Deviation

#### Seminar link {-}
Seminars for all groups take place on **Thursday morning**. You can find the **Zoom** link to your seminar group on [Moodle](https://moodle.ucl.ac.uk/course/view.php?id=6845). 

## Before you leave {#byl-w02}
Save your R script by pressing the **Save** button in the script window. [That is it for this week](https://www.youtube.com/watch?v=Wmc8bQoL-J0)!